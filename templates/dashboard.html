{% extends 'base.html' %}
{% block content %}
<div style="margin-bottom: var(--spacing-lg);">
    <h2>Dashboard</h2>
    <p style="color: var(--text-secondary);">Welcome back, {{ user.username }}!</p>
</div>

<div class="dashboard-grid">
    <div class="card stat-card">
        <h3>Today's Study Time</h3>
        <div class="stat-value">{{ total_hours }}h {{ total_minutes }}m</div>

        {% if is_studying %}
        <div
            style="margin: 20px 0; padding: 1rem; background-color: rgba(253, 121, 168, 0.1); border-radius: var(--radius-sm);">
            <p style="font-weight: 600; color: var(--accent-color); margin-bottom: 0.5rem;">Currently Studying...</p>
            <p style="font-size: 0.9rem; color: var(--text-secondary);">Started at: <span class="local-time"
                    data-iso="{{ active_session.start_time|date:'c' }}">Loading...</span></p>
        </div>
        <form action="{% url 'stop_study' %}" method="post">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger btn-block">Stop Studying</button>
        </form>
        {% else %}
        <div style="margin: 20px 0;">
            <p style="color: var(--text-secondary);">Ready to focus?</p>
        </div>
        <form action="{% url 'start_study' %}" method="post">
            {% csrf_token %}
            <button type="submit" class="btn btn-secondary btn-block">Start Studying</button>
        </form>
        {% endif %}
    </div>
</div>
{% endblock %}